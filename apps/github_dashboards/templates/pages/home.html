{% extends "base.html" %}
{% load bootstrap4 %}
{% load static %}
{% block title %}
Github Dashboard App - Home
{% endblock title %}
{% load panels_extras %}
<!-- {% load cache %} -->
{% block content %}
<div class='row dashboards justify-content-between position-relative align-items-start'>
    {% for panel in panels %}
    <div class="col-{{panel.panel_size | panel_to_column_size }} dashboard-panel card d-flex shadow">
        <h2>{{ panel }}</h2>
        <h3 class='repo-description'>{{panel.repo_description}}</h3>
        {% if panel.is_table %}
        {% cache 180 default panel.id %}
        {% with tablerepos=panel.get_repos %}
        <table class="table w-100" id='table-{{panel.id}}' style="font-size:{{panel.panel_size|resize_from_columns}}em;">
            {% include 'snippets/table.html' %}
        </table>
        {% endwith %}
        {% endcache %}
        {% else %}
        <embed class='mb-0' type="image/svg+xml" src="{{ panel.svg }}">
        {% endif %}
        <a class='stretched-link' href="{% url 'show_panel' panel_id=panel.id %}"></a>
    </div>
    {% endfor %}
</div>
{% endblock content %}